#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <time.h>

#define ITERATIONS 30

int ifWith2Cases(int input) {
    if(input == 0) {
        return 0;
    } else if(input == 1) {
        return 0;
    }
    return 1;
}

int ifWith3Cases(int input) {
    if(input == 0) {
        return 0;
    } else if(input == 1) {
        return 0;
    } else if(input == 2) {
        return 0;
    }
    return 1;
}

int ifWith5Cases(int input) {
    if(input == 0) {
        return 0;
    } else if(input == 1) {
        return 0;
    } else if(input == 2) {
        return 0;
    } else if(input == 3) {
        return 0;
    } else if(input == 4) {
        return 0;
    }
    return 1;
}

int ifWith8Cases(int input) {
    if (input == 0) {
        return 0;
    } else if (input == 1) {
        return 0;
    } else if (input == 2) {
        return 0;
    } else if (input == 3) {
        return 0;
    } else if (input == 4) {
        return 0;
    } else if (input == 5) {
        return 0;
    } else if (input == 6) {
        return 0;
    } else if (input == 7) {
        return 0;
    } 
    return 1;
}

int ifWith10Cases(int input) {
    if (input == 0) {
        return 0;
    } else if (input == 1) {
        return 0;
    } else if (input == 2) {
        return 0;
    } else if (input == 3) {
        return 0;
    } else if (input == 4) {
        return 0;
    } else if (input == 5) {
        return 0;
    } else if (input == 6) {
        return 0;
    } else if (input == 7) {
        return 0;
    } else if (input == 8) {
        return 0;
    } else if (input == 9) {
        return 0;
    }
    return 1;
}

int ifWith30Cases(int input) {
    if (input == 0) {
        return 0;
    } else if (input == 1) {
        return 0;
    } else if (input == 2) {
        return 0;
    } else if (input == 3) {
        return 0;
    } else if (input == 4) {
        return 0;
    } else if (input == 5) {
        return 0;
    } else if (input == 6) {
        return 0;
    } else if (input == 7) {
        return 0;
    } else if (input == 8) {
        return 0;
    } else if (input == 9) {
        return 0;
    } else if (input == 10) {
        return 0;
    } else if (input == 11) {
        return 0;
    } else if (input == 12) {
        return 0;
    } else if (input == 13) {
        return 0;
    } else if (input == 14) {
        return 0;
    } else if (input == 15) {
        return 0;
    } else if (input == 16) {
        return 0;
    } else if (input == 17) {
        return 0;
    } else if (input == 18) {
        return 0;
    } else if (input == 19) {
        return 0;
    } else if (input == 20) {
        return 0;
    } else if (input == 21) {
        return 0;
    } else if (input == 22) {
        return 0;
    } else if (input == 23) {
        return 0;
    } else if (input == 24) {
        return 0;
    } else if (input == 25) {
        return 0;
    } else if (input == 26) {
        return 0;
    } else if (input == 27) {
        return 0;
    } else if (input == 28) {
        return 0;
    } else if (input == 29) {
        return 0;
    }
    return 1;
}

int switchWith2Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        default:
            return 1;
    }
}

int switchWith3Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        case 2:
            return 0; 
            break;   
        default:
            return 1;
    }
}

int switchWith5Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        case 2:
            return 0;  
            break;
        case 3:
            return 0;
            break;
        case 4:
            return 0; 
            break;   
        default:
            return 1;
    }
}

int switchWith8Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        case 2:
            return 0;  
            break;
        case 3:
            return 0;
            break;
        case 4:
            return 0;
            break;
        case 5:
            return 0;
            break;
        case 6:
            return 0;
            break;
        case 7:
            return 0; 
            break;
        default:
            return 1;
    }
}

int switchWith10Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        case 2:
            return 0;  
            break;
        case 3:
            return 0;
            break;
        case 4:
            return 0;
            break;
        case 5:
            return 0; 
            break; 
        case 6:
            return 0;
            break;
        case 7:
            return 0;
            break;
        case 8:
            return 0;
            break;
        case 9:
            return 0;
            break;
        default:
            return 1;
    }
}

int switchWith30Cases(int input) {
    switch(input) {
        case 0:
            return 0;
            break;
        case 1:
            return 0;
            break;
        case 2:
            return 0;  
            break;
        case 3:
            return 0;
            break;
        case 4:
            return 0;
            break;
        case 5:
            return 0; 
            break; 
        case 6:
            return 0;
            break;
        case 7:
            return 0;
            break;
        case 8:
            return 0;
            break;
        case 9:
            return 0;
            break;
        case 10:
            return 0;
            break;
        case 11:
            return 0;
            break;
        case 12:
            return 0;  
            break;
        case 13:
            return 0;
            break;
        case 14:
            return 0;
            break;
        case 15:
            return 0; 
            break; 
        case 16:
            return 0;
            break;
        case 17:
            return 0;
            break;
        case 18:
            return 0;
            break;
        case 19:
            return 0;
            break;
        case 20:
            return 0;
            break;
        case 21:
            return 0;
            break;
        case 22:
            return 0;  
            break;
        case 23:
            return 0;
            break;
        case 24:
            return 0;
            break;
        case 25:
            return 0; 
            break; 
        case 26:
            return 0;
            break;
        case 27:
            return 0;
            break;
        case 28:
            return 0;
            break;
        case 29:
            return 0;
            break;
        default:
            return 1;
    }
}

void loopIfCaseTenMillionTimes(int cases, char type) {
    int (*functionPointer)(int);
    int input;
    clock_t start, end;
    bool isAverageCase = false;
    double elapsed = 0.0;
    switch(cases) {
        case 2:
            functionPointer = ifWith2Cases;
            switch(type) {
                case 'w':
                    input = 1;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 2;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        case 3:
            functionPointer = ifWith3Cases;
            switch(type) {
                case 'w':
                    input = 2;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 3;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        case 5:
            functionPointer = ifWith5Cases;
            switch(type) {
                case 'w':
                    input = 4;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 5;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        case 8:
            functionPointer = ifWith8Cases;
            switch(type) {
                case 'w':
                    input = 7;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 8;
                    isAverageCase = true;
                    break;
                default:
                    break;
            } 
            break;

        case 10:
            functionPointer = ifWith10Cases;
            switch(type) {
                case 'w':
                    input = 9;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 10;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;
            
        case 30:
            functionPointer = ifWith30Cases;
            switch(type) {
                case 'w':
                    input = 29;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 30;
                    isAverageCase = true;
                    break;
                default:
                    break;
            } 

        default:
            break;
    }

    for(int i = 0; i < ITERATIONS; i++) {
        start = clock();
        for(int j = 0; j < 10000000; j++) {
            if(isAverageCase) {
                int randomNum = rand() % input;
                functionPointer(randomNum);
            } else {
                functionPointer(input);
            }
        }
        end = clock();
        elapsed += (double)(end - start)/CLOCKS_PER_SEC;
    }
    printf("Average spent time: %.3f seconds, for if/else case with %d cases, average of %d iterations in %c case.\n", elapsed/ITERATIONS, cases, ITERATIONS, type);
}

void loopSwitchCaseTenMillionTimes(int cases, char type) {
    int (*functionPointer)(int);
    int input;
    clock_t start, end;
    bool isAverageCase = false;
    double elapsed = 0.0;
    switch(cases) {
        case 2:
            functionPointer = switchWith2Cases;
            switch(type) {
                case 'w':
                    input = 1;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 2;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        case 3:
            functionPointer = switchWith3Cases;
            switch(type) {
                case 'w':
                    input = 2;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 3;
                    isAverageCase = true;
                    break;
                default:
                    break;
            } 
            break;

        case 5:
            functionPointer = switchWith5Cases;
            switch(type) {
                case 'w':
                    input = 4;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 5;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }   
            break;

        case 8:
            functionPointer = switchWith8Cases;
            switch(type) {
                case 'w':
                    input = 7;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 8;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }  
            break;

        case 10:
            functionPointer = switchWith10Cases;
            switch(type) {
                case 'w':
                    input = 9;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 10;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        case 30:
            functionPointer = switchWith30Cases;
            switch(type) {
                case 'w':
                    input = 29;
                    break;
                case 'b':
                    input = 0;
                    break;
                case 'a':
                    input = 30;
                    isAverageCase = true;
                    break;
                default:
                    break;
            }
            break;

        default:
            break;
    }

    for(int i = 0; i < ITERATIONS; i++) {
        start = clock();
        for(int j = 0; j < 10000000; j++) {
            if(isAverageCase) {
                int randomNum = rand() % input;
                functionPointer(randomNum);
            } else {
                functionPointer(input);
            }
        }
        end = clock();
        elapsed += (double)(end - start)/CLOCKS_PER_SEC;
    }
    printf("Average spent time: %.3f seconds, for switch case with %d cases, average of %d iterations in %c case.\n", elapsed/ITERATIONS, cases, ITERATIONS, type);    
}

int main(void) {
    // AVAILABLE CASES: 2, 3, 5, 8, 10, 30

    srand(time(NULL));

    loopIfCaseTenMillionTimes(2, 'w');
    loopSwitchCaseTenMillionTimes(2, 'w');
    
    loopIfCaseTenMillionTimes(2, 'b');
    loopSwitchCaseTenMillionTimes(2, 'b');

    loopIfCaseTenMillionTimes(2, 'a');
    loopSwitchCaseTenMillionTimes(2, 'a');

    printf("\n");

    loopIfCaseTenMillionTimes(3, 'w');
    loopSwitchCaseTenMillionTimes(3, 'w');

    loopIfCaseTenMillionTimes(3, 'b');
    loopSwitchCaseTenMillionTimes(3, 'b');

    loopIfCaseTenMillionTimes(3, 'a');
    loopSwitchCaseTenMillionTimes(3, 'a');

    printf("\n");

    loopIfCaseTenMillionTimes(5, 'w');
    loopSwitchCaseTenMillionTimes(5, 'w');

    loopIfCaseTenMillionTimes(5, 'b');
    loopSwitchCaseTenMillionTimes(5, 'b');

    loopIfCaseTenMillionTimes(5, 'a');
    loopSwitchCaseTenMillionTimes(5, 'a');

    printf("\n");

    loopIfCaseTenMillionTimes(8, 'w');
    loopSwitchCaseTenMillionTimes(8, 'w');

    loopIfCaseTenMillionTimes(8, 'b');
    loopSwitchCaseTenMillionTimes(8, 'b');

    loopIfCaseTenMillionTimes(8, 'a');
    loopSwitchCaseTenMillionTimes(8, 'a');

    printf("\n");

    loopIfCaseTenMillionTimes(10, 'w');
    loopSwitchCaseTenMillionTimes(10, 'w');

    loopIfCaseTenMillionTimes(10, 'b');
    loopSwitchCaseTenMillionTimes(10, 'b');

    loopIfCaseTenMillionTimes(10, 'a');
    loopSwitchCaseTenMillionTimes(10, 'a');

    printf("\n");

    loopIfCaseTenMillionTimes(30, 'w');
    loopSwitchCaseTenMillionTimes(30, 'w');

    loopIfCaseTenMillionTimes(30, 'b');
    loopSwitchCaseTenMillionTimes(30, 'b');

    loopIfCaseTenMillionTimes(30, 'a');
    loopSwitchCaseTenMillionTimes(30, 'a');

    return 0;
}